angular.module("cardapioAdminApp.directives",[]).directive("menuLink",function(){return{scope:{sectionmenu:"="},templateUrl:"partials/tpl/menu-link.tpl.html",link:function(c,b){var a=b.parent().controller();c.isSelected=function(){return a.isSelected(c.sectionmenu)};c.focusSection=function(){a.autoFocusContent=true}}}}).directive("menuToggle",["$timeout",function(a){return{scope:{sectionmenu:"="},templateUrl:"partials/tpl/menu-toggle.tpl.html",link:function(e,d){var c=d.parent().controller();var f=d.find("ul");var g;e.isOpen=function(){return c.isOpen(e.sectionmenu)};e.toggle=function(){c.toggleOpen(e.sectionmenu)};e.$watch(function(){return c.isOpen(e.sectionmenu)},function(l){var k=d.find("ul");var j=l?i():0;a(function(){k.css({height:j+"px"})},0,false);function i(){var m;k.addClass("no-transition");k.css("height","");m=k.prop("clientHeight");k.css("height",0);k.removeClass("no-transition");return m}});var b=d[0].parentNode.parentNode.parentNode;if(b.classList.contains("parent-list-item")){var h=b.querySelector("h2");d[0].firstChild.setAttribute("aria-describedby",h.id)}}}}]).directive("chooseMedia",["$mdDialog","$rootScope","FileUploader","API",function(d,a,c,b){return{restrict:"AE",require:"ngModel",scope:{options:"=",model:"=ngModel"},template:'<div layout="row" layout-align="start center"><md-button class="md-accent" ng-click="choose($event)">Selecione</md-button><md-button ng-if="model" class="md-warn" ng-click="remove()">Remover</md-button></div>',link:function(h,f,g,e){h.remove=function(){h.model=""};h.choose=function(j){d.show({parent:angular.element(document.body),controller:i,ariaLabel:"Selecionar Imagem",targetEvent:j,clickOutsideToClose:true,templateUrl:"partials/tpl/media.html",}).then(function(k){h.model=k});function i(l,o,r,n,k,m){q();function q(){o.uploaddir=m.upload;o.media=l.client.media}o.cancelMedia=function(){r.cancel()};o.setMedia=function(t,s){o.imagechoose=t;o.selectedMedia=s};o.applyMedia=function(s){r.hide(s)};var p=o.uploader=new c({url:m.uploader+"uploader.php",autoUpload:true,});p.filters.push({name:"imageFilter",fn:function(u,s){var t="|"+u.type.slice(u.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1}});p.onAfterAddingFile=function(s){s.file.name=l.client.client+"_"+s.file.name};p.onErrorItem=function(u,t,s,v){k.msgToast(u+" : "+t)};p.onCompleteItem=function(u,t,s,w){var v={filename:u.file.name,size:u.file.size};l.client.media.push(v)};p.onCompleteAll=function(){l.client.put({client:l.client.client}).then(function(s){l.client=s;k.msgToast("Arquivos de imagens atualizados com sucesso.")})}}}}}}]).directive("chooseFileButton",function(){return{restrict:"A",link:function(b,c,a){c.bind("click",function(){angular.element(document.querySelector("#"+a.chooseFileButton))[0].click()})}}}).directive("mdWidget",function(a,b){return{restrict:"AE",scope:{slug:"=",widgettitle:"="},templateUrl:"partials/widgets/widget-default.html",controller:function(d,c){d.listWidgets=function(e,f){b.all(e).getList({pagesize:a.config.dashboard_widgets_pagesize}).then(function(g){d.widget_items=g;d.widget_pagesize=a.config.dashboard_widgets_pagesize;d.widget_slug=e;d.widget_title=f})};d.listWidgets(d.slug,d.widgettitle)}}}).directive("toggleClass",function(){return{restrict:"A",link:function(c,b,a){b.bind("click",function(){b.toggleClass(a.toggleClass)})}}});