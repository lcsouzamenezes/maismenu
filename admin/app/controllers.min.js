angular.module("cardapioAdminApp.controllers",[]).controller("DashboardController",function(b,c,d,a){console.log("controller: Dashboard Controller");b.uploaddir=a.upload}).controller("ProductsController",function(b,d,f,a,c){console.log("controller: Products Controller");var e;d.selected=[];d.query={limit:5,order:"title",page:1};d.removeProduct=function(h,i){var g=f.confirm().parent(angular.element(document.body)).title("Deseja deletar este Produto?").content("* Este produto será removido permanentemente.").ariaLabel("Remover Produto").ok("DELETAR").cancel("CANCELAR").targetEvent(i);f.show(g).then(function(){b.client.products.splice(h,1);b.client.put({client:b.client.client}).then(function(j){b.client=j;a.msgToast("Produto  ...Deletado!")})})},d.removeProducts=function(j,i){var g=d.selected;var h=f.confirm().parent(angular.element(document.body)).title("Deseja deletar os Produtos selecionados?").content("* Estes produtos serão removidos permanentemente.").ariaLabel("Remover Produtos").ok("DELETAR").cancel("CANCELAR").targetEvent(j);f.show(h).then(function(){angular.forEach(g,function(l){var k=d.client.products.indexOf(l);d.selected=[];b.client.products.splice(k,1);b.client.put({client:b.client.client}).then(function(m){b.client=m;a.msgToast("Produto  ...Deletado!")})})})};d.cloneProduct=function(g){b.client.products.push(angular.copy(b.client.products[g]));b.client.put({client:b.client.client}).then(function(h){b.client=h;a.msgToast(b.client.products[g].title+" clonado, atualizando...")})};d.onPaginate=function(){d.selected=[]}}).controller("AddProductsController",function(c,d,e,b,a){console.log("controller: Add Product Controller");d.product={_created_on:new Date()};d.saveProduct=function(f){if(!c.client.products){c.client.products=[]}c.client.products.push(f);c.client.put({client:c.client.client}).then(function(g){c.client=g;e.go("admin.products",{client:c.client.client});b.msgToast(f.title+" criado!")})};d.slugIt=function(f){d.product.slug=a.generate(f)}}).controller("EditProductsController",function(c,d,e,f,b,a,g){console.log("controller: Edit Product Controller");if(!c.client){g.getList({client:f.client}).then(function(h){c.client=h[0];d.productIndex=f.product;d.product=c.client.products[d.productIndex];d.product._created_on=new Date(d.product._created_on)})}else{d.productIndex=f.product;d.product=c.client.products[d.productIndex];d.product._created_on=new Date(d.product._created_on)}d.saveProduct=function(h){c.client.put({client:c.client.client}).then(function(i){c.client=i;d.product=c.client.products[d.productIndex];d.product._created_on=new Date(d.product._created_on);a.msgToast(c.client.products[d.productIndex].title+" atualizado!")})};d.update=function(h){c.client.put({client:c.client.client}).then(function(i){c.client=i;a.msgToast(h)})};d.slugIt=function(h){d.product.slug=b.generate(h)};d.commentAproved=function(h){d.product.comments[h].status=true;d.update("Comentário aprovado.")};d.commentDisaproved=function(h){d.product.comments[h].status=false;d.update("Comentário pendente.")};d.commentRemove=function(h){d.product.comments.splice(h,1);d.update("Comentário excluído.")}}).controller("ProductsCatsController",function(c,d,f,b,a,e){console.log("controller: Products Cats Controller");d.catEditing=false;d.addTax=function(g){if(!d.catEditing){if(!c.client.categories){c.client.categories=[]}c.client.categories.push(g)}c.client.put({client:c.client.client}).then(function(h){d.catEditing=false;c.client=h;g="";a.msgToast("Categorias atualizadas!")})};d.editTax=function(g){d.catEditing=true;d.cat=c.client.categories[g]};d.remTax=function(i,h){var g=f.confirm().parent(angular.element(document.body)).title("Deseja deletar a Categoria selecionada?").content("* Esta categoria será removida permanentemente.").ariaLabel("Remover Categoria").ok("DELETAR").cancel("CANCELAR").targetEvent(i);f.show(g).then(function(){c.client.categories.splice(h,1);c.client.put({client:c.client.client}).then(function(j){c.client=j;a.msgToast("Categorias atualizadas!")})})};d.slugIt=function(g){d.cat.slug=b.generate(g)}}).controller("BannersController",function(b,c,d,f,h,a,g){console.log("controller: Banners Controller");var e;c.selected=[];c.filter={options:{debounce:500}};c.query={limit:10,order:"title",page:1};c.removeFilter=function(){c.filter.show=false;c.query.filter={};if(c.filter.form.$dirty){c.filter.form.$setPristine()}};c.$watch("query.filter",function(j,i){if(!i){e=c.query.page}if(j!==i){c.query.page=1}if(!j){c.query.page=e}});c.removeBanner=function(j,k){var i=h.confirm().parent(angular.element(document.body)).title("Deseja deletar este Banner?").content("* Este banner será removido permanentemente.").ariaLabel("Remover Banner").ok("DELETAR").cancel("CANCELAR").targetEvent(k);h.show(i).then(function(){b.client.banners.splice(j,1);b.client.put({client:b.client.client}).then(function(l){b.client=l;a.msgToast("Banner deletado.")})})},c.removeBanners=function(l,k){var i=c.selected;var j=h.confirm().parent(angular.element(document.body)).title("Deseja deletar os Banners selecionados?").content("* Estes banners serão removidos permanentemente.").ariaLabel("Remover Banners").ok("DELETAR").cancel("CANCELAR").targetEvent(l);h.show(j).then(function(){angular.forEach(i,function(n){var m=c.client.banners.indexOf(n);c.selected=[];b.client.banners.splice(m,1);b.client.put({client:b.client.client}).then(function(o){b.client=o[0];a.msgToast("Banner deletado.")})})})};c.cloneBanner=function(i){b.client.banners.push(angular.copy(b.client.banners[i]));b.client.put({client:b.client.client}).then(function(j){b.client=j;a.msgToast("Banner "+b.client.banners[i].title+" clonado, atualizando.")})}}).controller("AddBannersController",function(b,c,a,d){console.log("controller: Add Banner Controller");c.banner={created:new Date()};c.saveBanner=function(e){if(!b.client.banners){b.client.banners=[]}b.client.banners.push(e);b.client.put({client:b.client.client}).then(function(f){b.client=f;a.msgToast('"'+e.title+'" banner criado.')})}}).controller("EditBannersController",function(b,c,d,e,a,f){console.log("controller: Edit Banner Controller");c.bannerIndex=e.banner;c.banner=b.client.banners[c.bannerIndex];c.banner.created=new Date(c.banner.created);c.saveBanner=function(){b.client.put({client:b.client.client}).then(function(g){b.client=g;a.msgToast("Banner "+b.client.banners[c.bannerIndex].title+" atualizado.")})}}).controller("SettingsController",function(b,c,e,d,f,a,g){console.log("controller: Config Controller");c.updateConfig=function(){b.client.put({client:b.client.client}).then(function(h){b.client=h;a.msgToast("Informações atualizadas!")})};c.themelst=[{name:"Padrão Dark",value:"def-dark"},{name:"Padrão White",value:"def-white"},{name:"Indigo Dark",value:"indigo-dark"},{name:"Indigo White",value:"indigo-white"},{name:"Teal Dark",value:"teal-dark"},{name:"Teal White",value:"teal-white"},]}).controller("MediaController",function(f,g,e,d,i,a,h,b){console.log("controller: MediaController");g.selectedmedia=[];g.errors=[];g.setMedia=function(k,j){if(g.selectedmedia.indexOf(k)===-1){g.selectedmedia.push(k)}else{g.selectedmedia.splice(g.selectedmedia.indexOf(k),1)}};var c=g.uploader=new h({url:b.uploader+"uploader.php",autoUpload:true,});c.filters.push({name:"imageFilter",fn:function(l,j){var k="|"+l.type.slice(l.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(k)!==-1}});c.onAfterAddingFile=function(j){j.file.name=f.client.client+"_"+j.file.name};c.onErrorItem=function(l,k,j,m){i.msgToast(l+" : "+k)};c.onCompleteItem=function(l,k,j,n){var m={filename:l.file.name,size:l.file.size};f.client.media.push(m)};c.onCompleteAll=function(){f.client.put({client:f.client.client}).then(function(j){f.client=j;i.msgToast("Arquivos de imagens atualizados com sucesso.")})};g.deleteImgs=function(m,l){var j=g.selectedmedia;var k=a.confirm().parent(angular.element(document.body)).title("Deseja deletar as imagens selecionadas?").content("* Estas imagens serão removidas permanentemente.").ariaLabel("Remover Imagens").ok("DELETAR").cancel("CANCELAR").targetEvent(m);a.show(k).then(function(){angular.forEach(j,function(p){var n=f.client.media.indexOf(p);g.selectedmedia=[];f.client.media.splice(n,1);var o={method:"POST",url:b.uploader+"delete.php",data:{filename:b.upload+p.filename},headers:{"Content-Type":"application/json","Access-Control-Allow-Headers":"*","Access-Control-Allow-Origin":"*"}};e(o).then(function(q){console.log(q)},function(q){console.log(q)});i.msgToast("media #"+p._id+", deletada.")});f.client.put({client:f.client.client}).then(function(n){f.client=n;i.msgToast("Arquivos de imagens atualizados com sucesso.")})})}}).controller("SidebarController",function(e,o,p,q,b,r,j,h,t,i){console.log("controller: SidebarController");var l=this;o.menu=i;o.openMenu=c;o.closeMenu=m;o.isSectionSelected=a;o.focusMainContent=d;e.$on("$locationChangeSuccess",g);this.isOpen=k;this.isSelected=f;this.toggleOpen=s;this.autoFocusContent=false;var n=document.querySelector("[role='main']");function m(){r(function(){b("left").close()})}function c(){r(function(){b("left").open()})}function g(){o.closeMenu();if(l.autoFocusContent){d();l.autoFocusContent=false}}function d(u){if(u){u.preventDefault()}r(function(){n.focus()},90)}function f(u){return i.isPageSelected(u)}function a(u){var w=false;var v=i.openedSection;if(v===u){w=true}return w}function k(u){return i.isSectionSelected(u)}function s(u){return i.toggleSelectSection(u)}o.gotoCardapio=function(){j.open("/client/#!/"+q.client+"/index","_blank")}});